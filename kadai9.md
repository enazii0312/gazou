# 課題９
画像処理工学

　メディアンフィルタを適用し，ノイズ除去を体験せよ．

１．	使用プログラム

filename = uigetfile('*');
ORG=imread(filename); % 原画像の入力
ORG = rgb2gray(ORG); % 白黒濃淡画像に変換
imagesc(ORG); colormap(gray); colorbar; % 画像の表示
pause;
ORG = imnoise(ORG,'salt & pepper',0.02); % ノイズ添付
imagesc(ORG); colormap(gray); colorbar; % 画像の表示
pause;
IMG = filter2(fspecial('average',3),ORG); % 平滑化フィルタで雑音除去
imagesc(IMG); colormap(gray); colorbar; % 画像の表示
pause;
IMG = medfilt2(ORG,[3 3]); % メディアンフィルタで雑音除去
imagesc(IMG); colormap(gray); colorbar; % 画像の表示
pause;
f=[0,-1,0;-1,5,-1;0,-1,0]; % フィルタの設計
IMG = filter2(f,IMG,'same'); % フィルタの適用
imagesc(IMG); colormap(gray); colorbar; % 画像の表示
pause;



 
２．実行結果
 
 ![原画像](https://github.com/enazii0312/image/blob/master/kadai9-1.jpg)
 
図１　原画像のグレースケール(170×170)

  ![原画像](https://github.com/enazii0312/image/blob/master/kadai9-2.jpg)
  
図２　図１にノイズ添付した画像
 
  ![原画像](https://github.com/enazii0312/image/blob/master/kadai9-3.jpg)
  
図３　図２を平滑化フィルタで雑音除去した画像
 
  ![原画像](https://github.com/enazii0312/image/blob/master/kadai9-4.jpg)
  
図４　図２をメディアンフィルタで雑音除去した画像

 ![原画像](https://github.com/enazii0312/image/blob/master/kadai9-5.jpg)
 
図５　図４に設計したフィルタを適用した画像


３．	考察
　今回の課題はメディアンフィルタを適用し、ノイズ除去を体験するものであった。
原画像のグレースケールに図２の塩コショウのようなノイズを添付したものを平滑化フィルタとメディアンフィルタのそれぞれでノイズを除去しようとすると平滑化フィルタが図３、メディアンフィルタは図４の結果となった。
図３の平滑化フィルタはノイズの黒色が薄くなったが一つ一つのノイズが大きくなってしまっている。また、画像全体がぼやけてしまっており図２よりも見にくくなっている。これは平滑化フィルタの処理の方法が着目した画素の濃度値をその周辺の画素の濃度に重みを付けて平均化する事でノイズ除去を行っているからである。その為、ノイズが大きく薄いグレーになってしまったと考えられる。
　図４のメディアンフィルタはノイズ除去のぼやけを回避する手段として用いられるフィルタ法である。平滑化フィルタとは異なり、着目画素周辺の画素濃度の平均値を取るのではなく、着目画素周辺の画素濃度の中間値を取ることで他の画素への影響を抑え、ぼやけがないノイズ除去ができる。
　図５の適用したフィルタは画像の鮮鋭化をする為のフィルタである。画像の濃度値の変化を強調して表現するフィルタであり、オーバーシュートとアンダーシュートと呼ばれる現象が利用される。オーバーシュートとは濃度勾配が大から小へ変化する場合一度濃度値が本来の大きさより行き過ぎてから元の値に戻る現象であり、アンダーシュートは濃度勾配が小から大へ変化する場合一度濃度値が小さくなり過ぎてから元の値に戻る現象のことである。画像の輪郭部にこれらを加えると、輪郭が協調された画像になる。画像全体が灰色がかっているのは恐らくこの現象によるものであり、実際に画像全体灰色がかることで図１でも確認しにくい消しゴムケースの下側の折り目部分が目視しやすくなっているのが確認できる。
これらの事からメディアンフィルタの特性および鮮鋭化フィルタの特性を理解することができた。
